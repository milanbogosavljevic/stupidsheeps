this.system=this.system||{},function(){"use strict";var a=function(){};a.makeText=function(a,b,c,d,e){var f=new createjs.Text(a,b,c);return f.textAlign=d,f.textBaseline=e,f.mouseEnabled=!1,f.tickEnabled=!1,f},a.makeImage=function(a,b){var c=new createjs.Bitmap(queue.getResult(a));return c.mouseEnabled=b,c.tickEnabled=!1,c},a.playSound=function(a,b,c){c=c||0,b=b||1,createjs.Sound.play(a,{loop:c,volume:b})},a.getLastChar=function(a){return a.charAt(a.length-1)},a.makeAnimation=function(a,b,c,d){var e=queue.getResult(a),f=e.width/b,g=e.height,h=new createjs.SpriteSheet({images:[e],frames:{regX:f/2,regY:g/2,width:f,height:g,count:b},animations:{animate:[0,b-1,d]},framerate:c}),i=new createjs.Sprite(h);return i.mouseEnabled=!1,i},a.getRandomNumberFromTo=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},a.getRandomBool=function(){return .5<Math.random()},system.CustomMethods=a}();this.system=this.system||{},function(){"use strict";var a,b=function(){this.Container_constructor(),this.initGame()},c=createjs.extend(b,createjs.Container);c.platformsArr=null,c.movingInterval=null,c.intervalSpeed=null,c.counterForIntervalDecrement=0,c.maxSpeedReached=!1,c.livesNum=null,c.livesImgsArr=null,c.scoreNum=null,c.scoreText=null,c.finalScoreTxt=null,c.highscoreNum=null,c.highscoreText=null,c.gameIsPaused=!1,c.restartButton=null,c.counterText=null,c.initGame=function(){a=this,this.intervalSpeed=3e3,this.livesNum=3,this.scoreNum=0,this.highscoreNum=+(localStorage.getItem("highscore")||0),this.setBackground(),this.setPlatforms(),this.setSideBackground(),this.setButtons(),this.setLives(),this.setScore(),this.setRestartOverlay(),this.setCounter(),this.setWelcomeSection()},c.setCounter=function(){var a=this.counterText=system.CustomMethods.makeText("3","100px Teko","#ffffff","center","middle");a.x=640,a.y=64,a.visible=!1,this.addChild(a)},c.animateCounter=function(){var b=+this.counterText.text;this.counterText.visible=!0;var c=setInterval(function(){b--,a.counterText.text=b,0==b&&(clearInterval(c),a.counterText.visible=!1,a.counterText.text=3),console.log("updating")},1e3)},c.setWelcomeSection=function(){var b=system.CustomMethods.makeImage("welcome",!1),c=system.CustomMethods.makeImage("playButton",!0);c.x=408,c.y=540,c.addEventListener("click",function(){a.removeChild(b,c),a.animateCounter(),a.startInterval()}),this.addChild(b,c)},c.setBackground=function(){var a=system.CustomMethods.makeImage("background",!1);this.addChild(a)},c.setSideBackground=function(){var a=system.CustomMethods.makeImage("right_sidebar",!1);a.x=1080,this.addChild(a)},c.setPlatforms=function(){this.platformsArr=[];var a=new system.Platform(this);a.y=184,a.setBridgePositions(4,8),a.setSheepsStartPosition([6,!1],[3,!0]),a.moveBridge();var b=new system.Platform(this);b.y=355,b.setBridgePositions(3,7),b.setSheepsStartPosition([4,!1],[10,!0]),b.moveBridge();var c=new system.Platform(this);c.y=526,c.setBridgePositions(5,10),c.setSheepsStartPosition([1,!1],[8,!0]),c.moveBridge(),this.platformsArr.push(a,b,c),this.addChild(a,b,c)},c.setButtons=function(){var a=system.CustomMethods.makeImage("button",!0);a.name=0,a.addEventListener("click",this.onBridgeButton),a.x=1128,a.y=152;var b=a.clone();b.name=1,b.x=1128,b.y=323,b.addEventListener("click",this.onBridgeButton);var c=a.clone();c.name=2,c.x=1128,c.y=494,c.addEventListener("click",this.onBridgeButton);var d=system.CustomMethods.makeImage("inGameRestartButton",!0),e=new createjs.Shape;e.graphics.beginFill("black").drawRect(0,0,d.image.width,d.image.height),d.hitArea=e,d.x=38,d.y=23,d.addEventListener("click",this.onInGameRestartButton),this.addChild(a,b,c,d)},c.setRestartOverlay=function(){var a=this.gameoverOverlay=system.CustomMethods.makeImage("overlay",!1);a.visible=!1;var b=this.finalScoreTxt=system.CustomMethods.makeText("25","90px Teko","#ffffff","center","middle");b.x=640,b.y=346,b.visible=!1;var c=this.restartButton=system.CustomMethods.makeImage("restartButton",!0);c.addEventListener("click",this.onRestartButton),c.x=408,c.y=418,c.visible=!1,this.addChild(a,c,b)},c.onBridgeButton=function(b){if(!a.gameIsPaused){var c=b.target.name;a.platformsArr[c].moveBridge()}},c.onRestartButton=function(){a.restartButton.visible=!1,a.gameoverOverlay.visible=!1,a.finalScoreTxt.visible=!1,a.maxSpeedReached=!1,a.restartGame()},c.onInGameRestartButton=function(){!1===a.counterText.visible&&a.restartGame()},c.restartGame=function(){a.livesNum=3,a.scoreNum=0,a.restartLivesImgs(),a.updateScoreText(),a.pauseGame(!1),a.restartInterval(3e3),a.animateCounter()},c.setLives=function(){this.livesImgsArr=[];var a=system.CustomMethods.makeImage("life",!1);a.x=983,a.y=25;var b=a.clone();b.x=a.x+30;var c=a.clone();c.x=b.x+30,this.livesImgsArr.push(a,b,c),this.addChild(a,b,c)},c.updateLivesImgs=function(){this.livesImgsArr[this.livesNum].visible=!1},c.restartLivesImgs=function(){for(var a=0;a<this.livesImgsArr.length;a++)this.livesImgsArr[a].visible=!0},c.setScore=function(){this.highscoreText=system.CustomMethods.makeText(this.highscoreNum,"30px Teko","#ffcc00","left","middle"),this.highscoreText.x=276,this.highscoreText.y=36,this.scoreText=system.CustomMethods.makeText(this.scoreNum,"30px Teko","#ffcc00","left","middle"),this.scoreText.x=224,this.scoreText.y=74,this.addChild(this.scoreText,this.highscoreText)},c.incrementScore=function(){this.scoreNum+=10,this.updateScoreText(),this.maxSpeedReached||this.checkSpeed()},c.checkSpeed=function(){this.counterForIntervalDecrement++,5<this.counterForIntervalDecrement&&(this.counterForIntervalDecrement=0,this.speedUp())},c.updateScoreText=function(){this.scoreText.text=this.scoreNum},c.updateHighscoreText=function(){this.highscoreText.text=this.highscoreNum},c.checkHighscore=function(){if(this.scoreNum>this.highscoreNum){this.highscoreNum=this.scoreNum,this.updateHighscoreText();var a=this.scoreNum+"";localStorage.setItem("highscore",a)}},c.sheepLost=function(){0<this.livesNum&&(this.livesNum--,this.updateLivesImgs(),0===this.livesNum&&this.onGameOver())},c.moveSheeps=function(){if(!a.gameIsPaused){a.incrementScore();for(var b=0;b<a.platformsArr.length;b++)a.platformsArr[b].moveSheeps()}},c.onGameOver=function(){this.pauseGame(!0),this.checkHighscore(),this.finalScoreTxt.text=this.scoreNum,this.restartButton.visible=!0,this.gameoverOverlay.visible=!0,this.finalScoreTxt.visible=!0},c.pauseGame=function(a){this.gameIsPaused=a},c.speedUp=function(){var a=this.intervalSpeed-200;this.restartInterval(a),1e3>this.intervalSpeed&&(this.maxSpeedReached=!0)},c.restartInterval=function(a){this.stopInterval(),this.intervalSpeed=a,this.startInterval()},c.startInterval=function(){this.movingInterval=setInterval(this.moveSheeps,this.intervalSpeed)},c.stopInterval=function(){clearInterval(this.movingInterval)},c.render=function(a){stage.update(a)},system.Game=createjs.promote(b,"Container")}();this.system=this.system||{},function(){"use strict";var a=function(a){this.Container_constructor(),this.initPlatform(a)},b=createjs.extend(a,createjs.Container);b.game=null,b.bridge=null,b.bridgePositions=null,b.sheepPositions=null,b.sheep1=null,b.sheep2=null,b.initPlatform=function(a){this.game=a,this.bridge=system.CustomMethods.makeImage("bridge",!1),this.bridge.regX=this.bridge.image.width/2,this.sheepPositions=[-45,45,135,225,315,405,495,585,675,765,855,945,1035,1125],this.sheep1=system.CustomMethods.makeImage("sheep",!1),this.sheep1.regX=this.sheep1.image.width/2,this.sheep1.y=-58,this.sheep2=system.CustomMethods.makeImage("sheep",!1),this.sheep2.regX=this.sheep2.image.width/2,this.sheep2.y=-58,this.addChild(this.bridge,this.sheep1,this.sheep2)},b.setSheepsStartPosition=function(a,b){this.sheep1.x=this.sheepPositions[a[0]],this.sheep1.isGoingLeft=a[1],this.sheep1.scaleX=!0===a[1]?-1:1,this.sheep2.x=this.sheepPositions[b[0]],this.sheep2.isGoingLeft=b[1],this.sheep2.scaleX=!0===b[1]?-1:1},b.moveSheeps=function(){this.moveSheep(this.sheep1),this.moveSheep(this.sheep2)},b.moveSheep=function(a){var b,c=this.sheepPositions.indexOf(a.x);!0===a.isGoingLeft?0===c?(a.isGoingLeft=!1,a.scaleX=1,a.x=this.sheepPositions[1]):(b=c-1,a.x=this.sheepPositions[b]):c===this.sheepPositions.length-1?(a.isGoingLeft=!0,a.scaleX=-1,a.x=this.sheepPositions[this.sheepPositions.length-2]):(b=c+1,a.x=this.sheepPositions[b]),this.checkDangerFields(a)},b.checkDangerFields=function(a){(a.x===this.bridgePositions[0]||a.x===this.bridgePositions[1])&&a.x!==this.bridge.x&&(this.game.sheepLost(),createjs.Tween.get(a).to({alpha:0},100).to({alpha:1},100).to({alpha:0},100).to({alpha:1},100))},b.moveBridge=function(){this.bridge.x=this.bridge.x===this.bridgePositions[0]?this.bridgePositions[1]:this.bridgePositions[0],this.checkDangerFields(this.sheep1),this.checkDangerFields(this.sheep2)},b.setBridgePositions=function(a,b){this.bridgePositions=[this.sheepPositions[a],this.sheepPositions[b]]},system.Platform=createjs.promote(a,"Container")}();